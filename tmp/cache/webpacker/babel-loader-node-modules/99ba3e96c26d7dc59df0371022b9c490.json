{"ast":null,"code":"var _jsxFileName = \"/home/cristi/Desktop/projects/wedding-application/app/javascript/packs/weddings.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nvar Weddings =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Weddings, _Component);\n\n  function Weddings(props) {\n    var _this;\n\n    _classCallCheck(this, Weddings);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Weddings).call(this, props));\n    _this.state = {\n      term: '',\n      autoCompleteResults: []\n    };\n    $('#selected_ids').attr('value', '');\n    $.getJSON('/search_users?q=' + _this.state.term).then(function (response) {\n      return _this.setState({\n        autoCompleteResults: response\n      });\n    });\n    return _this;\n  }\n\n  _createClass(Weddings, [{\n    key: \"getAutoCompleteResults\",\n    value: function getAutoCompleteResults(e) {\n      var _this2 = this;\n\n      this.setState({\n        term: e.target.value\n      }, function () {\n        $.getJSON('/search_users?q=' + _this2.state.term).then(function (response) {\n          return _this2.setState({\n            autoCompleteResults: response\n          });\n        }).then(function () {\n          return $('.user-item.selected').removeClass('selected');\n        }).then(function () {\n          return $('#selected_ids').attr('value').split(',').map(function (id, index) {\n            return $('.user-item[data-id=\"' + id + '\"]').addClass('selected');\n          });\n        });\n      });\n    }\n  }, {\n    key: \"toggleSelectedUser\",\n    value: function toggleSelectedUser(e) {\n      var elem = e.target;\n      var userId = elem.getAttribute('data-id');\n      $.ajax({\n        url: \"/weddings/toggle_user?user_id=\".concat(userId),\n        dataType: 'json',\n        method: 'PUT'\n      }).done(function (data) {\n        console.log(data);\n\n        if (data.remaining_users >= 0 && data.toggled === true) {\n          // $(elem).closest('.user-item').toggleClass('selected')\n          $('#selected_ids').attr('value', data.ids);\n          $('.user-item.selected').removeClass('selected');\n          $('#selected_ids').attr('value').split(',').map(function (id, index) {\n            return $('.user-item[data-id=\"' + id + '\"]').addClass('selected');\n          });\n        } else {\n          alert(\"You've already selected the maximum number of people.\");\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var autoCompleteList = this.state.autoCompleteResults.map(function (response, index) {\n        return React.createElement(\"div\", {\n          className: \"card user-item\",\n          style: {\n            width: \"10rem\"\n          },\n          \"data-id\": response.id,\n          key: index,\n          onClick: _this3.toggleSelectedUser.bind(_this3),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: response.avatar,\n          className: \"card-img-top\",\n          \"data-id\": response.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          className: \"user-name card-title\",\n          \"data-id\": response.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, response.name)));\n      });\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row my-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        ref: function ref(input) {\n          _this3.searchBar = input;\n        },\n        className: \"form-control\",\n        value: this.state.term,\n        onChange: this.getAutoCompleteResults.bind(this),\n        type: \"text\",\n        placeholder: \"Search people\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"user-item-wrapper card-deck\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, autoCompleteList)));\n    }\n  }]);\n\n  return Weddings;\n}(Component);\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  ReactDOM.render(React.createElement(Weddings, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), document.getElementById(\"weddings-new-invitees-wrapper\").appendChild(document.createElement('div')));\n}); // <img src=\"https://source.unsplash.com/random/200x300\" className=\"user-picture\" data-id={response.id} />\n// <img src= {response.id}>{response.avatar.url} className=\"user-picture\" data-id={response.id} />","map":{"version":3,"sources":["/home/cristi/Desktop/projects/wedding-application/app/javascript/packs/weddings.jsx"],"names":["React","Component","ReactDOM","Weddings","props","state","term","autoCompleteResults","$","attr","getJSON","then","response","setState","e","target","value","removeClass","split","map","id","index","addClass","elem","userId","getAttribute","ajax","url","dataType","method","done","data","console","log","remaining_users","toggled","ids","alert","autoCompleteList","width","toggleSelectedUser","bind","avatar","name","input","searchBar","getAutoCompleteResults","document","addEventListener","render","getElementById","appendChild","createElement"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\n\nclass Weddings extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      term: '',\n      autoCompleteResults: []\n    };\n\n    $('#selected_ids').attr('value', '')\n\n\n    $.getJSON('/search_users?q=' + this.state.term)\n      .then(response => this.setState({ autoCompleteResults: response }))\n  }\n\n  getAutoCompleteResults(e) {\n    this.setState({\n      term: e.target.value\n    }, () => {\n      $.getJSON('/search_users?q=' + this.state.term)\n        .then(response => this.setState({ autoCompleteResults: response })).then(() =>  $('.user-item.selected').removeClass('selected')).then(() => $('#selected_ids').attr('value').split(',').map((id, index) => $('.user-item[data-id=\"' + id +'\"]').addClass('selected')))\n    });\n  }\n\n  toggleSelectedUser(e) {\n    const elem = e.target;\n    const userId = elem.getAttribute('data-id');\n\n    $.ajax({\n      url: `/weddings/toggle_user?user_id=${userId}`,\n      dataType: 'json',\n      method: 'PUT'\n    }).done(function (data) {\n      console.log(data)\n      if (data.remaining_users >= 0 && data.toggled === true) {\n        // $(elem).closest('.user-item').toggleClass('selected')\n        $('#selected_ids').attr('value', data.ids)\n        $('.user-item.selected').removeClass('selected')\n        $('#selected_ids').attr('value').split(',').map((id, index) => $('.user-item[data-id=\"' + id +'\"]').addClass('selected'))\n      } else {\n        alert(\"You've already selected the maximum number of people.\")\n      }\n    });\n  }\n\n  render() {\n    let autoCompleteList = this.state.autoCompleteResults.map((response, index) => {\n      return (\n        <div className=\"card user-item\" style={{\n          width: \"10rem\"\n        }} data-id={response.id} key={index} onClick={this.toggleSelectedUser.bind(this)} >\n          <img src={response.avatar} className=\"card-img-top\" data-id={response.id} />\n          <div className=\"card-body\">\n            <h5 className=\"user-name card-title\" data-id={response.id}>{response.name}</h5>\n          </div>\n        </div>\n      )\n    });\n\n    return (\n      <div className=\"container\">\n        <div className=\"row my-4\">\n          <input ref={(input) => { this.searchBar = input }} className=\"form-control\" value={this.state.term} onChange={this.getAutoCompleteResults.bind(this)} type='text' placeholder='Search people' />\n        </div>\n        <div className=\"row\">\n          <div className=\"user-item-wrapper card-deck\">\n            {autoCompleteList}\n          </div>\n        </div >\n      </div>\n    )\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(\n    <Weddings />,\n    document.getElementById(\"weddings-new-invitees-wrapper\").appendChild(document.createElement('div')),\n  )\n});\n\n\n// <img src=\"https://source.unsplash.com/random/200x300\" className=\"user-picture\" data-id={response.id} />\n// <img src= {response.id}>{response.avatar.url} className=\"user-picture\" data-id={response.id} />\n"]},"metadata":{},"sourceType":"module"}
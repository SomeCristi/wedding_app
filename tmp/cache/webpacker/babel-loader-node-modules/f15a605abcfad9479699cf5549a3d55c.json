{"ast":null,"code":"var _jsxFileName = \"/home/cristi/Desktop/projects/wedding-application/app/javascript/packs/weddings.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nvar Weddings =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Weddings, _Component);\n\n  function Weddings(props) {\n    var _this;\n\n    _classCallCheck(this, Weddings);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Weddings).call(this, props));\n    _this.state = {\n      term: '',\n      autoCompleteResults: []\n    };\n    $.getJSON('/search_users?q=' + _this.state.term).then(function (response) {\n      return _this.setState({\n        autoCompleteResults: response\n      });\n    });\n    return _this;\n  }\n\n  _createClass(Weddings, [{\n    key: \"getAutoCompleteResults\",\n    value: function getAutoCompleteResults(e) {\n      var _this2 = this;\n\n      this.setState({\n        term: e.target.value\n      }, function () {\n        $.getJSON('/search_users?q=' + _this2.state.term).then(function (response) {\n          return _this2.setState({\n            autoCompleteResults: response\n          });\n        });\n      });\n    }\n  }, {\n    key: \"toggleSelectedUser\",\n    value: function toggleSelectedUser(e) {\n      var elem = e.target;\n      var userId = elem.getAttribute('data-id');\n      var weddingId = $('#wedding_id').val();\n      $.ajax({\n        url: \"\".concat(weddingId, \"/toggle_user?user_id=\").concat(userId),\n        dataType: 'json',\n        method: 'PUT'\n      }).done(function (data) {\n        console.log(data);\n\n        if (data.remaining_users >= 0 && data.toggled === true) {\n          $(elem).closest('.user-item').toggleClass('selected');\n        } else {\n          alert(\"You've already selected the maximum number of people.\");\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var autoCompleteList = this.state.autoCompleteResults.map(function (response, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          \"data-id\": response.id,\n          className: \"user-item\",\n          onClick: _this3.toggleSelectedUser.bind(_this3),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"https://source.unsplash.com/random/200x300\",\n          className: \"user-picture\",\n          \"data-id\": response.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }), React.createElement(\"h2\", {\n          className: \"user-name\",\n          \"data-id\": response.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, response.name));\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        ref: function ref(input) {\n          _this3.searchBar = input;\n        },\n        value: this.state.term,\n        onChange: this.getAutoCompleteResults.bind(this),\n        type: \"text\",\n        placeholder: \"Search...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"user-item-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, autoCompleteList));\n    }\n  }]);\n\n  return Weddings;\n}(Component);\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  ReactDOM.render(React.createElement(Weddings, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), document.body.appendChild(document.createElement('div')));\n});","map":{"version":3,"sources":["/home/cristi/Desktop/projects/wedding-application/app/javascript/packs/weddings.jsx"],"names":["React","Component","ReactDOM","Weddings","props","state","term","autoCompleteResults","$","getJSON","then","response","setState","e","target","value","elem","userId","getAttribute","weddingId","val","ajax","url","dataType","method","done","data","console","log","remaining_users","toggled","closest","toggleClass","alert","autoCompleteList","map","index","id","toggleSelectedUser","bind","name","input","searchBar","getAutoCompleteResults","document","addEventListener","render","body","appendChild","createElement"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\n\nclass Weddings extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      term: '',\n      autoCompleteResults: []\n    };\n\n\n    $.getJSON('/search_users?q=' + this.state.term)\n      .then(response => this.setState({ autoCompleteResults: response }))\n  }\n\n  getAutoCompleteResults(e){\n    this.setState({\n      term: e.target.value\n    }, () => {\n      $.getJSON('/search_users?q=' + this.state.term)\n        .then(response => this.setState({ autoCompleteResults: response }))\n    });\n  }\n\n  toggleSelectedUser(e) {\n    const elem = e.target;\n    const userId = elem.getAttribute('data-id'); \n    const weddingId = $('#wedding_id').val();\n\n    $.ajax({\n      url: `${weddingId}/toggle_user?user_id=${userId}`,\n      dataType: 'json',\n      method: 'PUT'\n    }).done(function(data) {\n      console.log(data)\n      if (data.remaining_users >= 0 && data.toggled === true) {\n        $(elem).closest('.user-item').toggleClass('selected')\n      } else {\n        alert(\"You've already selected the maximum number of people.\")\n      }\n    });\n  }\n\n  render() {\n    let autoCompleteList = this.state.autoCompleteResults.map((response, index) => {\n      return (\n        <div key={index} data-id={response.id} className=\"user-item\" onClick={ this.toggleSelectedUser.bind(this) }>\n          <img src=\"https://source.unsplash.com/random/200x300\" className=\"user-picture\" data-id={response.id} />\n          <h2 className=\"user-name\" data-id={response.id}>{response.name}</h2>\n        </div>\n      )\n    });\n\n    return (\n      <div>\n        <input ref={ (input) => { this.searchBar = input } } value={ this.state.term } onChange={ this.getAutoCompleteResults.bind(this) } type='text' placeholder='Search...' />\n        <div className=\"user-item-wrapper\">\n          { autoCompleteList }\n        </div>\n      </div>\n    )\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(\n    <Weddings />,\n    document.body.appendChild(document.createElement('div')),\n  )\n});\n"]},"metadata":{},"sourceType":"module"}